<div class="flex between center">
  <h3 style="margin: 0">{{ collection }}</h3>
  <button class="btn btn--primary btn--sm"
          hx-get="/ui/tables/{{ collection }}/new"
          hx-target="#doc-form"
          hx-swap="innerHTML">New</button>
  
</div>

<div id="doc-form" class="card" style="margin: .75rem 0; padding: .75rem;"></div>

{% if hits and columns %}
  <div class="table-wrapper">
    <table class="table">
      <thead>
        <tr>
          <th>ID</th>
          {% for col in columns %}
            <th>{{ col }}</th>
          {% endfor %}
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for h in hits %}
          {% set src = h._source or {} %}
          <tr>
            <td><code>{{ h._id }}</code></td>
            {% for col in columns %}
              {% set v = src.get(col) %}
              <td>{{ v if v is not none else '' }}</td>
            {% endfor %}
            <td>
              <div class="btn-group btn-group--sm">
                <button class="btn" hx-get="/ui/tables/{{ collection }}/{{ h._id }}/edit" hx-target="#doc-form" hx-swap="innerHTML">Edit</button>
                <button class="btn btn--danger"
                        hx-delete="/ui/tables/{{ collection }}/{{ h._id }}"
                        hx-confirm="Delete this document?"
                        hx-target="#table-area"
                        hx-swap="innerHTML">Delete</button>
              </div>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% else %}
  <div class="muted">No documents found.</div>
{% endif %}

